:root{
  --bg:#0a0f1c;
  --panel: rgba(255,255,255,.05);
  --card: rgba(255,255,255,.06);
  --stroke: rgba(255,255,255,.10);
  --text:#eaf1ff;
  --muted:#9fb0d6;

  --accent:#2b6cff;
  --accent2:#66e3a8;
  --danger:#ff3b3b;

  --shadow: 0 18px 42px rgba(0,0,0,.45);
  --r: 18px;
  --t: 180ms;

  --pad: 14px;
  --gap: 12px;
  --fs: 14px;
}

body.light{
  --bg:#f4f7ff;
  --panel: rgba(10,20,40,.03);
  --card: rgba(255,255,255,.95);
  --stroke: rgba(10,20,40,.10);
  --text:#0f172a;
  --muted:#51607a;
  --shadow: 0 16px 34px rgba(10,20,40,.10);
}

body.compact{
  --pad: 10px;
  --gap: 10px;
  --fs: 13px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-size: var(--fs);
  background:
    radial-gradient(1200px 600px at 20% 0%, rgba(43,108,255,.22), transparent 60%),
    radial-gradient(1000px 560px at 90% 10%, rgba(102,227,168,.16), transparent 55%),
    var(--bg);
  color:var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

:focus-visible{
  outline:none;
  box-shadow: 0 0 0 4px rgba(43,108,255,.18);
  border-color: rgba(43,108,255,.55) !important;
}

@media (prefers-reduced-motion: reduce){
  *{transition:none !important; animation:none !important}
}

/* ===== Transitions between panels ===== */
.panel{
  display:none;
  opacity:0;
  transform: translateY(6px);
  transition: opacity var(--t) ease, transform var(--t) ease;
}
.panel.active{
  display:block;
  opacity:1;
  transform: translateY(0);
}

/* Toasts */
.toastHost{
  position:fixed;
  top:14px;
  right:14px;
  display:flex;
  flex-direction:column;
  gap:10px;
  z-index:1200;
  pointer-events:none;
}
.toast{
  pointer-events:auto;
  width:min(360px, calc(100vw - 28px));
  border-radius:16px;
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
  border:1px solid var(--stroke);
  box-shadow: var(--shadow);
  padding:12px;
  display:flex;
  gap:10px;
  align-items:flex-start;
  transform: translateY(-10px);
  opacity:0;
  transition: transform var(--t) ease, opacity var(--t) ease;
}
.toast.show{transform:translateY(0); opacity:1}
.toast .tIcon{
  width:34px;height:34px;border-radius:12px;
  display:grid;place-items:center;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  color:var(--muted);
  flex:0 0 auto;
}
.toast .tBody{min-width:0}
.toast .tTitle{font-weight:900; letter-spacing:.2px}
.toast .tMsg{color:var(--muted); font-size:12px; margin-top:4px}
.toast .tClose{
  margin-left:auto;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  color:var(--text);
  border-radius:12px;
  padding:8px 10px;
  cursor:pointer;
}

/* Drawer (notifications) */
.drawerOverlay{
  display:none;
  position:fixed; inset:0;
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(6px);
  z-index:1000;
}
.drawerOverlay.show{display:block}
.drawer{
  position:fixed;
  right:12px;
  top:12px;
  bottom:12px;
  width:min(420px, calc(100vw - 24px));
  border-radius:18px;
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
  border:1px solid var(--stroke);
  box-shadow: var(--shadow);
  z-index:1100;
  transform: translateX(110%);
  transition: transform var(--t) ease;
  display:flex;
  flex-direction:column;
}
.drawer.open{transform: translateX(0)}
.drawerHead{
  padding: var(--pad);
  border-bottom:1px solid var(--stroke);
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:10px;
}
.drawerTitle{font-weight:950; letter-spacing:.2px}
.drawerSub{color:var(--muted); font-size:12px; margin-top:6px}
.drawerBtns{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
.drawerBody{
  padding: var(--pad);
  overflow:auto;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.noteItem{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  border-radius:16px;
  padding:12px;
}
.noteTop{display:flex; justify-content:space-between; gap:10px; align-items:center}
.noteTitle{font-weight:900}
.noteTime{color:var(--muted); font-size:12px}
.noteMsg{color:var(--muted); font-size:12px; margin-top:6px}

/* Modal */
.modal{
  position:fixed; inset:0;
  display:none;
  z-index:1050;
}
.modal.show,.modal.open{display:block}
.modalBackdrop{
  position:absolute; inset:0;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(10px);
}
.modalCard, .cmdkCard{
  position:relative;
  width:min(560px, calc(100vw - 28px));
  margin: 12vh auto 0;
  max-height: 86vh;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  border-radius:18px;
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
  border:1px solid var(--stroke);
  box-shadow: var(--shadow);
  padding: var(--pad);
  animation: pop var(--t) ease;
}
@keyframes pop{from{transform:translateY(10px);opacity:.6}to{transform:translateY(0);opacity:1}}
.modalHead{
  display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
}
.modalTitle{font-weight:950; letter-spacing:.2px}
.modalDesc{color:var(--muted); font-size:12px; margin-top:6px}
.modalActions{
  margin-top: var(--gap);
  display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap;
}

/* Command palette */
.cmdkCard{margin: 10vh auto 0}
.cmdkHead{display:flex; align-items:center; justify-content:space-between; gap:10px}
.cmdkTitle{font-weight:950}
.cmdkInput{
  width:100%;
  margin-top: var(--gap);
  padding:12px 12px;
  border-radius:14px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  color:var(--text);
}
.cmdkList{
  margin-top: var(--gap);
  display:flex;
  flex-direction:column;
  gap:8px;
  max-height: 46vh;
  overflow:auto;
}
.cmdkItem{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  border-radius:16px;
  padding:12px;
  display:flex;
  justify-content:space-between;
  gap:12px;
  cursor:pointer;
}
.cmdkItem.active{
  background: rgba(43,108,255,.14);
  border-color: rgba(43,108,255,.35);
}
.cmdkLeft{min-width:0}
.cmdkName{font-weight:900}
.cmdkDesc{color:var(--muted); font-size:12px; margin-top:6px}
.cmdkKey{
  color:var(--muted);
  font-size:12px;
  border:1px solid var(--stroke);
  border-radius:999px;
  padding:6px 10px;
  background: rgba(255,255,255,.03);
  white-space:nowrap;
  flex:0 0 auto;
}
.cmdkHint{color:var(--muted); font-size:12px; margin-top: var(--gap)}

/* Gate */
.gate{
  position:fixed; inset:0;
  display:flex; align-items:center; justify-content:center;
  padding:16px;
  background: rgba(0,0,0,.60);
  backdrop-filter: blur(12px);
  z-index:999;
}
.gate.hidden{display:none}
.gateCard{
  width:min(440px, 100%);
  border-radius: var(--r);
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
  border:1px solid var(--stroke);
  box-shadow: var(--shadow);
  padding:16px;
}
.gateBrand{display:flex; align-items:center; gap:12px; padding:6px 6px 10px}
.logoMark{
  width:40px; height:40px; border-radius:14px;
  background: linear-gradient(135deg, rgba(43,108,255,1), rgba(102,227,168,1));
  box-shadow: 0 14px 28px rgba(43,108,255,.25);
}
.logoMark.small{width:34px;height:34px;border-radius:12px}
.gateBrand h1{margin:0; font-size:18px; letter-spacing:.3px}
.gateBrand p{margin:6px 0 0; color:var(--muted); font-size:13px}
.gateForm{margin-top:10px; display:flex; flex-direction:column; gap:12px}
.field{display:flex; flex-direction:column; gap:8px}
.lbl{font-size:12px; color:var(--muted)}
.err{min-height:18px; color:var(--danger); font-size:12px}
.gateFoot{margin-top:12px; display:flex; gap:8px; flex-wrap:wrap}
.chip{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.04);
  color:var(--muted);
  border-radius:999px;
  padding:6px 10px;
  font-size:12px;
}
.pwWrap{display:flex; gap:10px; align-items:center}
.pwWrap input{flex:1}

/* Layout */
.app{
  display:grid;
  grid-template-columns: 290px 1fr;
  min-height:100vh;
}

.sidebar{
  position:sticky; top:0;
  height:100vh;
  display:flex; flex-direction:column; justify-content:space-between;
  padding:14px;
  border-right:1px solid var(--stroke);
  background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
  transition: transform var(--t) ease;
}

.sbBrand{display:flex; align-items:center; gap:12px; padding:8px}
.sbTitle .name{font-weight:950; letter-spacing:.3px}
.sbTitle .sub{color:var(--muted); font-size:12px; margin-top:4px}

.sbNav{
  margin-top:10px;
  display:flex; flex-direction:column; gap:8px;
  padding:8px;
  border-radius: var(--r);
  background: rgba(255,255,255,.03);
  border:1px solid var(--stroke);
}

.tab{
  display:flex; align-items:center; gap:10px;
  width:100%;
  padding:12px 12px;
  border-radius:14px;
  border:1px solid transparent;
  background: transparent;
  color:var(--text);
  cursor:pointer;
  text-align:left;
  font-weight:850;
  transition: transform var(--t) ease, background var(--t) ease, border-color var(--t) ease;
}
.tab:hover{transform: translateY(-1px); background: rgba(255,255,255,.03)}
.tab .ic{
  width:26px; height:26px; display:grid; place-items:center;
  border-radius:10px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  color:var(--muted);
}
.tab.active{
  background: rgba(43,108,255,.14);
  border-color: rgba(43,108,255,.35);
}
.tab[disabled]{opacity:.45; cursor:not-allowed}

.sbBottom{
  padding:10px 8px 8px;
  display:flex; flex-direction:column; gap:10px;
}
.sbMeta{
  color:var(--muted);
  font-size:12px;
  display:flex; align-items:center; gap:8px;
  padding:0 6px;
}
.dot{opacity:.6}
.sbActions{display:flex; flex-wrap:wrap; gap:10px}

.sbOverlay{
  display:none;
  position:fixed; inset:0;
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(6px);
  z-index:50;
}

/* Content */
.content{padding:18px 18px 22px}

.topbar{
  display:flex; align-items:center; justify-content:space-between;
  gap:14px;
  padding: var(--pad);
  border-radius: var(--r);
  background: rgba(255,255,255,.04);
  border:1px solid var(--stroke);
  box-shadow: 0 10px 24px rgba(0,0,0,.12);
  margin-bottom: var(--gap);
}
.topTitle .h{font-size:18px; font-weight:1000}
.topTitle .p{color:var(--muted); font-size:12px; margin-top:6px}
.topPills{display:flex; gap:10px; align-items:center}

.menuBtn{display:none}

/* Components */
.card{
  border-radius: var(--r);
  background: var(--card);
  border:1px solid var(--stroke);
  box-shadow: var(--shadow);
  padding: var(--pad);
  margin-bottom: var(--gap);
}
.card.mini{padding:12px}
.cardHead{
  display:flex; align-items:center; justify-content:space-between;
  gap:10px;
  margin-bottom:10px;
}
h2{margin:0; font-size:15px; letter-spacing:.2px}

.pill{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  border-radius:999px;
  padding:6px 10px;
  font-size:12px;
  font-weight:900;
}
.pill.subtle{color:var(--muted); font-weight:700}
.muted{color:var(--muted)}

.grid3{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--gap);
}
.grid2{
  display:grid;
  grid-template-columns: 1.2fr .8fr;
  gap: var(--gap);
}
@media (max-width: 980px){
  .app{grid-template-columns: 1fr}
  .sidebar{
    position:fixed;
    left:0; top:0;
    width: 290px;
    height:100vh;
    z-index:60;
    transform: translateX(-110%);
  }
  .sidebar.open{transform: translateX(0)}
  .sbOverlay{display:block; opacity:0; pointer-events:none; transition: opacity var(--t) ease}
  .sbOverlay.show{opacity:1; pointer-events:auto}
  .menuBtn{display:inline-grid}
  .grid3{grid-template-columns:1fr}
  .grid2{grid-template-columns:1fr}
}

.statCard .k{color:var(--muted); font-size:12px}
.statCard .v{font-size:28px; font-weight:1000; margin-top:6px}
.statCard .s{color:var(--muted); font-size:12px; margin-top:4px}


/* Color picker (borde de tarjetas) */
.colorInput{
  width:44px;
  height:40px;
  padding:0;
  border-radius:12px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  cursor:pointer;
}
.colorInput::-webkit-color-swatch-wrapper{ padding:6px; }
.colorInput::-webkit-color-swatch{ border:none; border-radius:10px; }
.row{display:flex; gap:10px; margin:10px 0}
.row.compact{margin:0}
.row2{display:flex; gap:10px}
@media (max-width:720px){ .row,.row2{flex-direction:column} }

input, select, textarea{
  width:100%;
  padding:12px 12px;
  border-radius:14px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  color:var(--text);
  outline:none;
  transition: box-shadow var(--t) ease, border-color var(--t) ease, transform var(--t) ease;
}
input:focus, select:focus, textarea:focus{
  border-color: rgba(43,108,255,.50);
  box-shadow: 0 0 0 4px rgba(43,108,255,.12);
}

.notes{min-height: 240px; resize: vertical}

.btn{
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.04);
  color:var(--text);
  cursor:pointer;
  font-weight:900;
  transition: transform var(--t) ease, filter var(--t) ease, background var(--t) ease;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:10px;
}
.btn:hover{transform: translateY(-1px)}
.btn:active{transform: translateY(0)}
.btn.primary{
  background: linear-gradient(135deg, rgba(43,108,255,1), rgba(102,227,168,.85));
  border-color: rgba(43,108,255,.35);
}
.btn.ghost{background: rgba(255,255,255,.03)}
.btn.danger{
  background: rgba(255,59,59,.08);
  border-color: rgba(255,59,59,.35);
  color: var(--danger);
}
.btn.sm{padding:8px 10px; border-radius:12px; font-weight:850}

.iconBtn{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  color:var(--text);
  border-radius:14px;
  padding:10px 12px;
  cursor:pointer;
  transition: transform var(--t) ease, background var(--t) ease;
}
.iconBtn:hover{transform: translateY(-1px)}
.iconBtn:active{transform: translateY(0)}

/* List + items */
.list{
  list-style:none;
  padding:0;
  margin:0;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:12px;
  border:1px solid var(--stroke);
  border-left:4px solid transparent;
  border-radius:16px;
  background: rgba(255,255,255,.03);
  transition: transform var(--t) ease, background var(--t) ease;
}
.item:hover{transform: translateY(-1px); background: rgba(255,255,255,.04)}
.item.dragging{opacity:.65; transform: scale(.99)}

.left{display:flex; align-items:center; gap:10px; min-width:0}
.chk{width:20px; height:20px}
.handle{
  width:28px; height:28px;
  border-radius:12px;
  border:1px solid var(--stroke);
  display:grid; place-items:center;
  background: rgba(255,255,255,.03);
  color:var(--muted);
  cursor:grab;
  user-select:none;
}

.title{
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  font-weight:1000;
  letter-spacing:.2px;
}
.subline{color:var(--muted); font-size:12px; margin-top:4px}
.badges{display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-top:8px}

.badge{
  font-size:12px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid var(--stroke);
  color:var(--muted);
  background: rgba(255,255,255,.03);
}
.badge.high{border-color:rgba(255,59,59,.35); color:var(--danger)}
.badge.med{border-color:rgba(43,108,255,.35); color:rgba(43,108,255,1)}
.badge.low{border-color:rgba(102,227,168,.35); color:rgba(102,227,168,1)}
.badge.todo{border-color:rgba(255,255,255,.14)}
.badge.doing{border-color:rgba(255,200,80,.35); color:rgba(255,200,80,1)}
.badge.done{border-color:rgba(102,227,168,.35); color:rgba(102,227,168,1)}

.miniList{
  list-style:none;
  padding:0;
  margin:0;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.miniItem{
  border:1px solid var(--stroke);
  border-left:4px solid transparent;
  border-radius:16px;
  padding:12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  background: rgba(255,255,255,.03);
}
.miniItem span{overflow:hidden; text-overflow:ellipsis; white-space:nowrap}

/* Chips row */
.chipRow{
  display:flex;
  align-items:center;
  gap:10px;
  margin: 10px 0 12px;
  flex-wrap:wrap;
}
.chipLabel{color:var(--muted); font-size:12px}
.chipWrap{display:flex; gap:8px; flex-wrap:wrap}
.chipBtn{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  color:var(--text);
  border-radius:999px;
  padding:8px 10px;
  cursor:pointer;
  font-weight:850;
}
.chipBtn.active{
  background: rgba(43,108,255,.14);
  border-color: rgba(43,108,255,.35);
}

/* Kanban */
.kanban{
  display:none;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--gap);
  margin-top: 12px;
}
.kanban.show{display:grid}
@media (max-width: 980px){ .kanban{grid-template-columns:1fr} }
.kCol{
  border:1px solid var(--stroke);
  border-radius:18px;
  background: rgba(255,255,255,.03);
  overflow:hidden;
  min-height: 260px;
}
.kHead{
  padding: 12px;
  border-bottom:1px solid var(--stroke);
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-weight:950;
}
.kCount{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  border-radius:999px;
  padding:6px 10px;
  color:var(--muted);
  font-size:12px;
}
.kBody{
  padding: 12px;
  display:flex;
  flex-direction:column;
  gap:10px;
  min-height: 220px;
}
.kCard{
  border:1px solid var(--stroke);
  border-left:4px solid transparent;
  background: rgba(255,255,255,.03);
  border-radius:16px;
  padding:12px;
  cursor:grab;
}
.kCard .kTitle{font-weight:950}
.kCard .kMeta{color:var(--muted); font-size:12px; margin-top:6px}

/* Skeleton loaders */
.skeletonWrap{
  display:none;
  margin: 12px 0;
}
.skeletonWrap.show{display:grid}
.skeletonLine{
  height: 14px;
  border-radius: 10px;
  border:1px solid var(--stroke);
  background: linear-gradient(90deg,
    rgba(255,255,255,.03) 0%,
    rgba(255,255,255,.10) 40%,
    rgba(255,255,255,.03) 80%);
  background-size: 200% 100%;
  animation: shimmer 1.1s linear infinite;
}
@keyframes shimmer{
  from{background-position: 0% 0}
  to{background-position: 200% 0}
}
.skeletonCard{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.03);
  border-radius:16px;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

/* Charts */
canvas{
  display:block;
  width:100%;
  border:1px solid var(--stroke);
  border-radius:16px;
  background: rgba(255,255,255,.02);
}
.miniHead{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:10px;
}

/* Spinner */
.spinner{
  width:16px; height:16px;
  border-radius:999px;
  border:2px solid rgba(255,255,255,.35);
  border-top-color: rgba(255,255,255,1);
  display:none;
  animation: spin 800ms linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
.btn.loading .spinner{display:inline-block}
.btn.loading .btnText{opacity:.85}

/* ======= Colores de estado (tareas/eventos) ======= */
:root{
  --c-todo: rgba(180,190,210,1);
  --c-doing: rgba(255,200,80,1);
  --c-done: rgba(102,227,168,1);
}

/* Lista: borde por estado */
.item.status-todo{ border-left: 4px solid rgba(180,190,210,.7); }
.item.status-doing{ border-left: 4px solid rgba(255,200,80,.7); }
.item.status-done{ border-left: 4px solid rgba(102,227,168,.7); }

/* Color personalizado: si existe, sustituye el borde por estado */
.item.hasColor{ border-left-color: var(--task-border); }

.miniItem{ border-left: 4px solid transparent; }
.miniItem.hasColor{ border-left-color: var(--task-border); }

.kCard{ border-left: 4px solid transparent; }
.kCard.hasColor{ border-left-color: var(--task-border); }

.calChip{ border-left: 4px solid transparent; }
.calChip.hasColor{ border-left-color: var(--task-border); }

.badge.todo{ background: rgba(180,190,210,.10); border-color: rgba(180,190,210,.25); color: var(--c-todo); }
.badge.doing{ background: rgba(255,200,80,.10); border-color: rgba(255,200,80,.30); color: var(--c-doing); }
.badge.done{ background: rgba(102,227,168,.10); border-color: rgba(102,227,168,.30); color: var(--c-done); }

/* Tipo */
.badge.type{ border-color: rgba(165,120,255,.35); color: rgba(165,120,255,1); background: rgba(165,120,255,.10); }

/* Tags con color determinista via --tag-h */
.badge.tag{
  border-color: hsl(var(--tag-h, 210) 70% 50% / .35);
  color: hsl(var(--tag-h, 210) 70% 55% / 1);
  background: hsl(var(--tag-h, 210) 70% 50% / .12);
}

/* ======= Calendario ======= */
.calHead{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-top:14px;
  margin-bottom:10px;
  flex-wrap:wrap;
}
.calMonth{ font-weight:800; font-size:18px; letter-spacing:.2px; }
.calLegend{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.dot{ width:10px; height:10px; border-radius:50%; display:inline-block; border:1px solid var(--stroke); }
.dot.todo{ background: rgba(180,190,210,.6); }
.dot.doing{ background: rgba(255,200,80,.7); }
.dot.done{ background: rgba(102,227,168,.7); }

.calendar{
  border:1px solid var(--stroke);
  border-radius:18px;
  overflow:hidden;
}
.calRow{
  display:grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
}
.calDow{
  font-size:12px;
  color: var(--muted);
  padding:10px 12px;
  background: rgba(255,255,255,.03);
  border-bottom:1px solid var(--stroke);
  font-weight:700;
}
.calCell{
  min-height:96px;
  padding:10px 10px 12px;
  border-right:1px solid var(--stroke);
  border-bottom:1px solid var(--stroke);
  position:relative;
}
.calCell:nth-child(7n){ border-right:none; }
.calCell .day{
  font-size:12px;
  color: var(--muted);
  font-weight:800;
}
.calCell.today{ outline:2px solid rgba(43,108,255,.35); outline-offset:-2px; }
.calCell.dim .day{ opacity:.45; }
.calItems{ margin-top:8px; display:flex; flex-direction:column; gap:6px; }
.calChip{
  display:flex;
  align-items:center;
  gap:8px;
  padding:6px 8px;
  border-radius:12px;
  border:1px solid var(--stroke);
  border-left:4px solid transparent;
  background: rgba(255,255,255,.03);
  font-size:12px;
  line-height:1.1;
  overflow:hidden;
}
.calChip .t{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.calChip .k{ width:8px; height:8px; border-radius:999px; flex:0 0 auto; }
.calChip.todo .k{ background: rgba(180,190,210,.8); }
.calChip.doing .k{ background: rgba(255,200,80,.85); }
.calChip.done .k{ background: rgba(102,227,168,.85); }
.calChip.event{ border-color: rgba(165,120,255,.25); }
.calChip small{ color: var(--muted); }
.row3{ display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap:12px; }
@media (max-width: 720px){
  .row3{ grid-template-columns: 1fr; }
}


/* ======= Temporizador ======= */
.timerLayout{
  display:grid;
  grid-template-columns: 1.1fr .9fr;
  gap:16px;
  align-items:stretch;
  margin-top:14px;
}
@media (max-width: 900px){
  .timerLayout{ grid-template-columns: 1fr; }
}

.timerRing{
  position:relative;
  min-height:340px;
  border:1px solid var(--stroke);
  border-radius:22px;
  background: radial-gradient(120% 120% at 50% 35%, rgba(0,255,255,.08), rgba(255,255,255,.02) 55%, rgba(0,0,0,.08));
  display:grid;
  place-items:center;
  overflow:hidden;
}

.timerSvg{
  width:min(360px, 78%);
  height:auto;
  transform: rotate(-90deg);
  filter: drop-shadow(0 10px 22px rgba(0,0,0,.35));
}

.timerTrack{
  fill:none;
  stroke: rgba(120, 200, 255, .18);
  stroke-width: 10;
  stroke-linecap: butt;
  stroke-dasharray: 1 1;
}
.timerProg{
  fill:none;
  stroke: rgba(0, 255, 255, .95);
  stroke-width: 10;
  stroke-linecap: butt;
  stroke-dasharray: 1 1;
  stroke-dashoffset: calc(100 * (1 - var(--timer-p, 0)));
  transition: stroke-dashoffset .12s linear;
}

.timerCenter{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  gap:8px;
  padding:14px;
}

.timerDigits{
  display:block;
  text-align:center;
  font-size: clamp(46px, 6vw, 74px);
  font-weight: 900;
  letter-spacing: 2px;
  color: rgba(0,255,255,.95);
  text-shadow:
    0 0 12px rgba(0,255,255,.35),
    0 0 26px rgba(0,255,255,.22);
  font-variant-numeric: tabular-nums;
  line-height: 1;
}

.timerControls{
  border:1px solid var(--stroke);
  border-radius:22px;
  padding:14px;
  background: rgba(255,255,255,.02);
}

.timerControls input[type="number"]{
  width:100%;
}


.timerActions{
  margin-top:12px;
}
.timerActions .row{
  justify-content:center;
}
.timerActions .btn{
  min-width: 110px;
}

.timerMeta{
  margin-top:12px;
  padding-top:12px;
  border-top:1px solid var(--stroke);
}

/* Segmented control (modo) */
.seg{
  margin-top:10px;
  display:inline-flex;
  gap:6px;
  padding:6px;
  border-radius:14px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.02);
}
.segBtn{
  padding:8px 12px;
  border-radius:12px;
  border:1px solid transparent;
  background: transparent;
  color: var(--muted);
  font-weight:900;
  letter-spacing:.2px;
  cursor:pointer;
}
.segBtn.active{
  background: rgba(0,255,255,.12);
  border-color: rgba(0,255,255,.22);
  color: var(--text);
}

.timerPhase{
  margin-top:10px;
  font-weight:1000;
  letter-spacing:.35px;
  color: rgba(190, 255, 255, .92);
  text-transform: uppercase;
  font-size: 12px;
}
.timerPhaseSub{
  margin-top:6px;
  color: var(--muted);
  font-size: 12px;
}

.row4{ display:grid; grid-template-columns: repeat(4, minmax(0, 1fr)); gap:12px; }
@media (max-width: 980px){
  .row4{ grid-template-columns: 1fr 1fr; }
}
@media (max-width: 520px){
  .row4{ grid-template-columns: 1fr; }
}

#timer[data-mode="timer"] .pomoOnly{ display:none; }
#timer[data-mode="pomodoro"] .timerOnly{ display:none; }

/* Pomodoro presets */
.pomoPresets{
  margin-top:14px;
  padding-top:14px;
  border-top:1px solid var(--stroke);
}
.pomoPresetList{
  margin-top:10px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.pomoPresetItem{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px;
  border-radius:16px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.02);
}
.pomoPresetItem .name{
  flex:1;
  min-width:160px;
}
.pomoPresetItem input{
  width:100%;
}
.pomoPresetMeta{
  font-size:12px;
  color: var(--muted);
  margin-top:4px;
}

.checkRow{
  display:inline-flex;
  align-items:center;
  gap:10px;
  user-select:none;
  cursor:pointer;
  color: var(--muted);
  font-size: 13px;
  font-weight:800;
}
.checkRow input{ width:18px; height:18px; }



.installCard{margin-bottom:12px}
.installRow{display:flex;align-items:center;justify-content:space-between;gap:14px}
.iosHint{margin-top:8px;font-size:12px;opacity:.9}
.colorInput{width:42px;height:36px;padding:0;border-radius:10px;border:1px solid rgba(255,255,255,.14);background:transparent}

/* ============================
   Install Banner (Modern)
============================ */
.installBanner{
  position: fixed;
  left: 16px;
  right: 16px;
  bottom: 16px;
  z-index: 9999;
  display: flex;
  justify-content: center;
  pointer-events: none;
}

.installCardPro{
  pointer-events: auto;
  width: min(980px, 100%);
  border-radius: 18px;
  padding: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(20, 24, 33, .78);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  box-shadow: 0 18px 50px rgba(0,0,0,.45);
  display: flex;
  gap: 14px;
  align-items: center;
  justify-content: space-between;
  transform: translateY(16px);
  opacity: 0;
  animation: installIn .35s ease forwards;
}

@keyframes installIn{
  to { transform: translateY(0); opacity: 1; }
}

.installLeft{
  display: flex;
  gap: 12px;
  align-items: center;
  min-width: 0;
}

.installIcon{
  width: 44px;
  height: 44px;
  border-radius: 12px;
  box-shadow: 0 10px 24px rgba(0,0,0,.35);
  flex: 0 0 auto;
}

.installText{ min-width: 0; }
.installTitle{
  font-weight: 800;
  letter-spacing: .2px;
  font-size: 14px;
  line-height: 1.1;
  white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 48vw;
}
.installSub{
  margin-top: 4px;
  font-size: 12px;
  opacity: .85;
  line-height: 1.25;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 62vw;
}

.installActions{
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Install-only buttons (scoped to avoid affecting app UI) */
.installBtn{
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color: inherit;
  padding: 10px 12px;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 800;
  font-size: 12px;
  transition: transform .08s ease, background .2s ease, border-color .2s ease;
  white-space: nowrap;
}
.installBtn:active{ transform: scale(.98); }
.installBtn:hover{ background: rgba(255,255,255,.10); border-color: rgba(255,255,255,.22); }

.installBtn.btnPrimary{
  background: rgba(99, 102, 241, .85);
  border-color: rgba(99, 102, 241, .9);
}
.installBtn.btnPrimary:hover{ background: rgba(99, 102, 241, .95); }

.installBtn.btnGhost{ background: transparent; }

.installBanner .btnIcon,
.sheet .btnIcon{
  width: 38px;
  height: 38px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color: inherit;
  cursor: pointer;
  transition: background .2s ease, transform .08s ease;
}
.installBanner .btnIcon:active,
.sheet .btnIcon:active{ transform: scale(.98); }
.installBanner .btnIcon:hover,
.sheet .btnIcon:hover{ background: rgba(255,255,255,.10); }

@media (max-width: 520px){
  .installSub{ display:none; }
  .installCardPro{ padding: 12px; }
}

@media (max-width: 420px){
  .installCardPro{ flex-wrap: wrap; align-items: flex-start; }
  .installLeft{ flex: 1 1 100%; }
  .installActions{ width: 100%; justify-content: space-between; }
  .installActions .btn{ flex: 1 1 auto; }
  .installActions .btnIcon{ flex: 0 0 auto; }
  .installTitle{ max-width: 70vw; }
}



/* ============================
   iOS Help Sheet (Bottom Sheet)
============================ */
.sheet{
  position: fixed;
  inset: 0;
  z-index: 10000;
}

.sheetBackdrop{
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(2px);
}

.sheetPanel{
  position: absolute;
  left: 12px;
  right: 12px;
  bottom: 12px;
  max-width: 720px;
  margin: 0 auto;
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(16, 20, 28, .92);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  box-shadow: 0 22px 70px rgba(0,0,0,.55);
  padding: 12px 14px 14px;
  transform: translateY(16px);
  opacity: 0;
  animation: sheetIn .22s ease forwards;
}

@keyframes sheetIn{
  to { transform: translateY(0); opacity: 1; }
}

.sheetHandle{
  width: 44px;
  height: 4px;
  border-radius: 999px;
  background: rgba(255,255,255,.22);
  margin: 2px auto 10px;
}

.sheetHeader{
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}

.sheetTitle{
  font-weight: 900;
  font-size: 14px;
}
.sheetSub{
  margin-top: 3px;
  font-size: 12px;
  opacity: .85;
}

.sheetSteps{
  display: grid;
  gap: 10px;
  margin: 10px 0 12px;
}

.step{
  display: flex;
  gap: 12px;
  padding: 12px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.05);
}

.stepNum{
  width: 30px;
  height: 30px;
  border-radius: 12px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight: 900;
  background: rgba(99, 102, 241, .85);
  border: 1px solid rgba(99, 102, 241, .9);
  flex: 0 0 auto;
}

.stepTitle{ font-weight: 800; font-size: 13px; }
.stepDesc{ font-size: 12px; opacity: .9; margin-top: 3px; }

.sheetFooter{ padding-top: 4px; }


/* ============================
   Install FAB (Mobile)
============================ */
.installFab{
  position: fixed;
  right: 14px;
  bottom: 14px;
  z-index: 10000;
  padding: 12px 14px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(20, 24, 33, .86);
  color: inherit;
  font-weight: 900;
  font-size: 12px;
  letter-spacing: .2px;
  cursor: pointer;
  box-shadow: 0 14px 34px rgba(0,0,0,.35);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

.installFab:active{ transform: translateY(1px); }

@media (min-width: 900px){
  .installFab{ display: none !important; }
}

/* Keep install banner above the FAB on mobile */
@media (max-width: 899px){
  .installBanner{ bottom: 72px; }
}


/* ===== Fix selects dropdown text visibility ===== */
select option{
  background: var(--bg);
  color: var(--text);
}

/* ===== Helpers ===== */
.srOnly{
  position:absolute !important;
  width:1px; height:1px;
  padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0);
  white-space:nowrap; border:0;
}
.inline2{ gap:10px; }
@media (max-width:720px){
  .inline2{ flex-direction:row; }
  .inline2 .field{ flex:1; }
  input[type="time"]{ padding:12px 10px; }
}

/* ===== Favorite colors ===== */
.colorBox{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
.colorRow{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
.favColors{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-top:8px;
}
.favColors .sw{
  width:28px; height:28px;
  border-radius:10px;
  border:1px solid var(--stroke);
  box-shadow: inset 0 0 0 2px rgba(0,0,0,.12);
  cursor:pointer;
}
.favColors .sw.active{
  outline: 3px solid rgba(43,108,255,.35);
  outline-offset: 2px;
}

/* ===== Notes as post-its ===== */
.notesBar{ display:flex; gap:10px; margin-top:10px; }
.notesBar input{ flex:1; }
@media (max-width:720px){
  .notesBar{ flex-direction:row; }
  .notesBar .btn{ padding:12px 12px; }
}
.notesMeta{ margin-top:8px; margin-bottom:6px; }
.notesBoard{
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap:12px;
  margin-top:10px;
}
@media (max-width:980px){ .notesBoard{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (max-width:520px){ .notesBoard{ grid-template-columns: 1fr; } }

.note{
  border-radius: 18px;
  border: 1px solid var(--stroke);
  background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.05));
  box-shadow: 0 12px 28px rgba(0,0,0,.18);
  padding: 12px 12px;
  position: relative;
  overflow:hidden;
}
body.light .note{
  background: linear-gradient(180deg, rgba(255,255,200,.95), rgba(255,255,180,.85));
}
.note.pinned{
  border-color: rgba(255, 214, 102, .55);
  box-shadow: 0 14px 34px rgba(255, 214, 102, .12), 0 12px 28px rgba(0,0,0,.16);
}
.noteTop{ display:flex; align-items:flex-start; justify-content:space-between; gap:10px; }
.noteText{
  font-weight:800;
  line-height:1.25;
  white-space:pre-wrap;
  word-break:break-word;
}
.noteMeta2{
  margin-top:8px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}
.noteBtns{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
.noteBtn{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.06);
  color: var(--text);
  border-radius: 12px;
  padding:8px 10px;
  cursor:pointer;
  font-weight:900;
}
.noteBtn.danger{ border-color: rgba(255,59,59,.45); color: #ffd1d1; }

/* ===== Tasks list mobile layout fix ===== */
.item{
  flex-wrap: wrap;
  gap: 10px;
}
.item .left{ min-width: 0; flex: 1 1 260px; }
.item .right{
  flex: 0 0 auto;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:flex-end;
}
@media (max-width:720px){
  .item .right{
    width:100%;
    justify-content:flex-start;
  }
  .item .right .badge{ margin-top:2px; }
  .item .tags{ margin-top:8px; display:flex; flex-wrap:wrap; gap:6px; }
  .item .subline{ margin-top:4px; }
}

/* ===== More compact mobile ===== */
@media (max-width:720px){
  .card{ padding: 12px; }
  .btn{ border-radius: 14px; }
  .pill{ border-radius: 999px; }
}


.notesBoard.mini{
  grid-template-columns: 1fr;
}
.notesBoard.mini .note{
  padding: 10px 10px;
}

/* Calendar points: start/end */
.calChip.start .t{ opacity: .98; }
.calChip.end .t{ opacity: .9; }


/* ===== Mobile polish (professional look) ===== */
@media (max-width: 980px){
  body{
    background:
      radial-gradient(900px 420px at 20% -8%, rgba(43,108,255,.18), transparent 60%),
      radial-gradient(820px 420px at 90% 6%, rgba(102,227,168,.11), transparent 55%),
      var(--bg);
  }

  .content{
    padding: 10px 10px 16px;
    padding-bottom: max(18px, env(safe-area-inset-bottom));
  }

  .topbar{
    position: sticky;
    top: 8px;
    z-index: 20;
    padding: 10px 12px;
    border-radius: 16px;
    margin-bottom: 10px;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    background: rgba(12,16,24,.72);
    box-shadow: 0 10px 28px rgba(0,0,0,.22);
  }
  body.light .topbar{ background: rgba(255,255,255,.82); }

  .topTitle .h{ font-size: 16px; }
  .topTitle .p{ margin-top: 3px; font-size: 11px; }
  .topPills{ gap: 6px; flex-wrap: wrap; justify-content: flex-end; }
  .topPills .pill{ padding: 5px 8px; font-size: 11px; }

  .sidebar{
    width: min(88vw, 340px);
    padding: 12px;
    box-shadow: 20px 0 44px rgba(0,0,0,.35);
    border-right-color: rgba(255,255,255,.12);
  }
  .sbBrand{ padding: 6px; }
  .sbNav{ gap: 6px; padding: 6px; }
  .tab{
    padding: 11px 10px;
    border-radius: 12px;
    font-size: 13px;
  }
  .tab .ic{ width:24px; height:24px; border-radius: 9px; }
  .sbBottom{ padding-top: 8px; gap: 8px; }

  .card{
    margin-bottom: 10px;
    border-radius: 16px;
    padding: 12px;
    box-shadow: 0 10px 24px rgba(0,0,0,.16);
  }
  .cardHead{ margin-bottom: 8px; }

  .row{ gap: 8px; margin: 8px 0; }
  .row2{ gap: 8px; }
  .btn{
    min-height: 42px;
    padding: 11px 12px;
    border-radius: 12px;
    font-size: 13px;
  }
  .btn.sm{ min-height: 38px; }
  input, select, textarea{
    min-height: 42px;
    padding: 10px 11px;
    border-radius: 12px;
    font-size: 13px;
  }

  .toastHost{ top: 10px; right: 10px; left: 10px; }
  .toast{ width: 100%; }

  .drawer{
    left: 8px;
    right: 8px;
    top: 8px;
    bottom: 8px;
    width: auto;
    border-radius: 16px;
  }

  .modalCard, .cmdkCard{
    margin-top: 8vh;
    width: calc(100vw - 16px);
    border-radius: 16px;
    padding: 12px;
  }

  .calendar{ border-radius: 14px; overflow: hidden; }
  .calCell{ min-height: 84px; padding: 8px 8px 10px; }
  .calItems{ gap: 4px; }
  .calChip{ padding: 5px 7px; border-radius: 10px; font-size: 11px; }

  .item{
    border-radius: 14px;
    padding: 10px;
  }
  .item .right .btn{ min-height: 36px; padding: 8px 10px; }

  .timerLayout{ gap: 10px; }
  .timerRing{
    min-height: 280px;
    border-radius: 18px;
  }
  .timerSvg{ width: min(320px, 82%); }
  .timerDigits{ font-size: clamp(40px, 12vw, 62px); letter-spacing: 1px; }
  .timerControls{ border-radius: 18px; padding: 12px; }
  .timerActions{ margin-top: 10px; }
  .timerActions .row{
    display: grid;
    grid-template-columns: repeat(3, minmax(0,1fr));
    gap: 8px;
  }
  .timerActions .btn{ min-width: 0; width: 100%; }
  .timerMeta{ margin-top: 10px; padding-top: 10px; }

  .pomoPresetItem{
    align-items: flex-start;
    flex-direction: column;
    gap: 8px;
    padding: 10px;
    border-radius: 14px;
  }
  .pomoPresetItem .name{ min-width: 0; width: 100%; }
  .pomoPresetItem > :last-child{
    width: 100%;
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }
  .pomoPresetItem > :last-child .btn,
  .pomoPresetItem > :last-child button{
    flex: 1 1 0;
    min-width: 90px;
  }

  .installBanner{ left: 10px; right: 10px; bottom: 70px; }
  .installCardPro{ border-radius: 16px; padding: 12px; gap: 10px; }
  .installTitle{ max-width: 52vw; }
}

@media (max-width: 520px){
  .content{ padding: 8px 8px 14px; }
  .topbar{ top: 6px; padding: 9px 10px; }
  .topTitle .h{ font-size: 15px; }
  .topPills .pill:nth-child(n+3){ display:none; }

  .row.spread{ flex-direction: column; align-items: stretch !important; }
  .row.spread > *{ width: 100%; }

  .card{ padding: 10px; border-radius: 14px; }
  h2, .h2{ font-size: 14px; }

  .timerRing{ min-height: 250px; }
  .timerSvg{ width: 84%; }
  .timerCenter{ gap: 6px; }
  .timerDigits{ font-size: clamp(36px, 11vw, 54px); }
  .timerPhase{ font-size: 11px; }
  .timerPhaseSub{ font-size: 11px; }

  .timerActions .row{
    grid-template-columns: 1fr;
  }

  .row4{ grid-template-columns: 1fr !important; }
  .pomoPresets .row.spread .row{ width: 100%; }
  .pomoPresets .field{ min-width: 0 !important; }

  .notesBar{ gap: 8px; }
  .installFab{
    right: 10px;
    bottom: 10px;
    padding: 11px 12px;
    border-radius: 14px;
  }
}


/* ===== Discord quick actions ===== */
.discordQuickBar{ display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
.dqBtn{ border-color: rgba(86,138,255,.25); background: rgba(35,56,110,.22); }
.dqBtn:hover{ transform: translateY(-1px); }
.discordModalCard{ max-width: 760px; }
.discordForm{ display:grid; gap:12px; }
.discordGrid{ gap:12px; }
.discordForm textarea.input{ min-height: 120px; resize: vertical; }
.discordFormFoot{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-top:4px; }
#discordFormHint{ font-size: 12px; }

@media (max-width: 899px){
  .discordQuickBar{ margin-top:10px; }
  .discordQuickBar .dqBtn{ flex:1 1 calc(50% - 6px); justify-content:center; }
  .discordFormFoot{ flex-direction:column; align-items:stretch; }
  .discordFormFoot .row{ width:100%; }
  .discordFormFoot .row .btn{ flex:1; }
  .discordGrid{ grid-template-columns: 1fr !important; }
}

/* Logo del sidebar */
.sbBrand .logoImg.small{
  width: 40px;
  height: 40px;
  min-width: 40px;
  min-height: 40px;
  border-radius: 12px;
  object-fit: contain;
  display: block;
  background: transparent;
}

/* Logo de la pantalla de login (ajusta el selector si tu contenedor se llama distinto) */
.authCard .logoImg,
.authBox .logoImg,
.loginCard .logoImg{
  width: 48px;
  height: 48px;
  min-width: 48px;
  min-height: 48px;
  border-radius: 14px;
  object-fit: contain;
  display: block;
  background: transparent;
}

/* Por seguridad: cualquier imagen con clase logoImg nunca debe crecer */
img.logoImg{
  max-width: 48px;
  max-height: 48px;
}


.authHint{font-size:.85rem; color:var(--muted); margin-top:.15rem; line-height:1.35}


/* ===================== APP install section (inline) ===================== */
.installCardInline{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
  padding:14px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.06);
  background: rgba(255,255,255,.03);
}
@media (max-width: 620px){
  .installCardInline{ flex-direction:column; align-items:stretch; }
  .installCardInline .installActions{ justify-content:stretch; }
  .installCardInline .installBtn{ width:100%; }
}

/* ===================== Calendar: mobile = dots only ===================== */
@media (max-width: 520px){
  /* En móvil, en una vista mensual 7 columnas el texto se recorta sí o sí.
     Aquí mostramos SOLO puntos (con borde de color) en vez de títulos. */

  .calendar{ overflow: hidden; }
  .calCell{ min-height: 92px; }

  /* En móvil, los items van en fila y se envuelven */
  .calItems{
    flex-direction: row;
    flex-wrap: wrap;
    gap: 6px;
    align-items: flex-start;
  }

  /* El chip se vuelve “invisible”: solo deja el punto */
  .calChip{
    padding: 2px;
    border: none;
    background: transparent;
    border-left: none;
    border-radius: 999px;
  }

  /* Ocultamos el texto, dejamos solo el punto */
  .calChip .t{ display:none; }

  /* Punto con borde (ring) */
  .calChip .k{
    width: 11px;
    height: 11px;
    background: transparent;
    border: 2px solid rgba(180,190,210,.85);
  }
  .calChip.todo .k{ border-color: rgba(180,190,210,.85); }
  .calChip.doing .k{ border-color: rgba(255,200,80,.90); }
  .calChip.done .k{ border-color: rgba(102,227,168,.90); }

  /* Si la tarea tiene color personalizado, el borde del punto usa ese color */
  .calChip.hasColor .k{ border-color: var(--task-border); }

  .calItems small{
    width: 100%;
    display:block;
    margin-top:2px;
  }
}

/* Desactivar UI antigua de instalación (banner flotante / fab). Ahora está en la sección APP */
.installBanner,
.installFab{
  display:none !important;
}

@media (max-width: 560px){
  .modalCard, .cmdkCard{ margin: 6vh auto 0; max-height: 90vh; }
}

/* ===================== Day modal list ===================== */
.dayList{
  display:flex;
  flex-direction:column;
  gap:10px;
}
.dayItem{
  padding:12px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.06);
  background: rgba(255,255,255,.03);
  cursor:pointer;
}
.dayItem:hover{
  background: rgba(255,255,255,.05);
}
.dayItemTop{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
}
.dayItemTitle{
  font-weight:700;
}
.dayItemMeta{
  margin-top:4px;
  font-size:12px;
  color: var(--muted);
}
.dayBadge{
  font-size:12px;
  padding:4px 8px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.08);
  color: var(--text);
  opacity:.9;
  flex:0 0 auto;
}
.dayBadge.todo{ background: rgba(180,190,210,.12); }
.dayBadge.doing{ background: rgba(255,200,80,.14); }
.dayBadge.done{ background: rgba(102,227,168,.14); }

/* ===================== Agenda ===================== */
.agendaList{ display:flex; flex-direction:column; gap:12px; margin-top:14px; }
.agendaDay{ border:1px solid rgba(255,255,255,.08); border-radius:16px; overflow:hidden; }
body.light .agendaDay{ border-color: rgba(0,0,0,.08); }
.agendaDayHead{ padding:10px 12px; font-weight:700; text-transform:capitalize; background: rgba(255,255,255,.03); }
body.light .agendaDayHead{ background: rgba(0,0,0,.03); }
.agendaItems{ display:flex; flex-direction:column; }
.agendaItem{ padding:12px; display:flex; gap:12px; align-items:flex-start; border-top:1px solid rgba(255,255,255,.06);
  border-left: 4px solid rgba(255,255,255,.18); cursor:pointer; }
body.light .agendaItem{ border-top-color: rgba(0,0,0,.06); border-left-color: rgba(0,0,0,.18); }
.agendaItem:first-child{ border-top:0; }
.agendaItem.hasColor{ border-left-color: var(--task-border); }
.agendaItem.todo:not(.hasColor){ border-left-color: rgba(59,130,246,.8); }
.agendaItem.doing:not(.hasColor){ border-left-color: rgba(245,158,11,.85); }
.agendaItem.done:not(.hasColor){ border-left-color: rgba(34,197,94,.85); }
.agendaMain{ flex:1; min-width:0; }
.agendaTitle{ font-weight:700; line-height:1.2; word-break: break-word; }
.agendaMeta{ margin-top:6px; display:flex; gap:6px; flex-wrap:wrap; }
.agendaTags{ display:flex; gap:6px; flex-wrap:wrap; justify-content:flex-end; }
.agendaTags .tag{ font-size:12px; padding:4px 8px; border-radius:999px; background: hsla(var(--h), 80%, 55%, .16); border:1px solid hsla(var(--h), 80%, 55%, .25); }
body.light .agendaTags .tag{ background: hsla(var(--h), 60%, 45%, .12); border-color: hsla(var(--h), 60%, 45%, .22); }
